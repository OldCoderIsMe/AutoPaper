<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@400;700&display=swap');

        body {
            font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.8;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #fff;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #2563eb;
        }

        .header h1 {
            font-family: 'Noto Serif SC', serif;
            font-size: 2.5em;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .header .meta {
            color: #64748b;
            font-size: 0.9em;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.8em;
            color: #2563eb;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .section h3 {
            font-size: 1.3em;
            color: #1e293b;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .section h4 {
            font-size: 1.1em;
            color: #2563eb;
            margin-top: 20px;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .trend-item {
            background: #f1f5f9;
            padding: 16px 20px;
            margin-bottom: 16px;
            border-left: 4px solid #2563eb;
            border-radius: 6px;
            line-height: 1.8;
        }

        .trend-number {
            font-weight: 700;
            color: #2563eb;
            font-size: 1.1em;
            margin-right: 8px;
        }

        .trend-title {
            color: #1e293b;
        }

        .numbered-paragraph {
            margin: 12px 0;
            padding-left: 20px;
            line-height: 1.8;
        }

        .article-block {
            background: #f8fafc;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #2563eb;
            border-radius: 4px;
        }

        .article-block p {
            margin-bottom: 12px;
            line-height: 1.8;
        }

        .article-block p:last-child {
            margin-bottom: 0;
        }

        .article-block strong {
            color: #1e293b;
            font-weight: 700;
        }

        .article-block em {
            color: #475569;
            font-style: italic;
        }

        .article-block code {
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
        }

        .article-block ul {
            margin: 12px 0;
            padding-left: 24px;
        }

        .article-block li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .tags {
            margin-top: 15px;
        }

        .tag {
            display: inline-block;
            background: #2563eb;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-right: 8px;
        }

        .news-list {
            list-style: none;
            padding: 0;
        }

        .news-list li {
            background: #f1f5f9;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .news-list li strong {
            color: #1e293b;
        }

        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
            text-align: center;
            color: #64748b;
            font-size: 0.85em;
        }

        @media print {
            body {
                padding: 0;
            }
            .section {
                page-break-inside: avoid;
            }
            .article-block {
                page-break-inside: avoid;
            }
            .ai-card {
                page-break-after: always;
                margin-bottom: 30px;
            }
        }

        .ai-card {
            text-align: center;
            margin-bottom: 40px;
            page-break-inside: avoid;
        }

        .ai-card img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>{{ title }}</h1>
        <div class="meta">{{ week_range }} | Generated by AutoPaper</div>
    </div>

    {% if introduction %}
    <div class="section">
        <h2>主编导语</h2>
        <div class="article-block">
            {{ introduction|safe }}
        </div>
    </div>
    {% endif %}

    {% if trends %}
    <div class="section">
        <h2>核心趋势</h2>
        {% if ai_card %}
        <div class="ai-card">
            <img src="{{ ai_card }}" alt="{{ title }} - AI Card"/>
        </div>
        {% endif %}
        <div class="article-block">
            {{ trends|safe }}
        </div>
    </div>
    {% endif %}

    {% if article_blocks %}
    <div class="section">
        <h2>深度文章</h2>
        {% for article in article_blocks %}
        <div class="article-block">
            <h3>{{ article.title }}</h3>
            {% if article.cover_image %}
            <p style="text-align: center; margin: 20px 0;">
                <img src="{{ article.cover_image }}" alt="{{ article.title }}" style="max-width: 100%; height: auto; border-radius: 4px;">
            </p>
            {% endif %}
            {{ article.content|safe }}
            <div class="tags">
                {% for tag in article.tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
            <p style="margin-top: 15px;">
                <strong>原文链接:</strong> <a href="{{ article.url }}" style="color: #2563eb;">{{ article.url }}</a>
            </p>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if news_briefs %}
    <div class="section">
        <h2>快讯速览</h2>
        <ul class="news-list">
            {% for brief in news_briefs %}
            <li><strong>{{ brief.title }}</strong>: {{ brief.summary }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if article_blocks %}
    <div class="section">
        <h2>文章链接</h2>
        <ul style="list-style: none; padding: 0;">
            {% for article in article_blocks %}
            <li style="margin-bottom: 10px;">
                <a href="{{ article.url }}" style="color: #2563eb; text-decoration: none;">{{ article.title }}</a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <div class="footer">
        <p>Generated by AutoPaper on {{ generated_at }}</p>
    </div>
</body>
</html>
